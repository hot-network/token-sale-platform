const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SolanaPayWidget-DuFbW-Ma.js","assets/index-DmRFr9OQ.js"])))=>i.map(i=>d[i]);
import{u as f,r as n,j as e,_ as y}from"./index-DmRFr9OQ.js";import{M as j}from"./Modal-BuwRmnok.js";import{B as d}from"./Button-8QpH5APH.js";import{A as N}from"./AssetIcons-BBQkBIh7.js";const k=n.lazy(()=>y(()=>import("./SolanaPayWidget-DuFbW-Ma.js"),__vite__mapDeps([0,1]))),S=a=>{const{transactions:c}=f(),[i,t]=n.useState("select_method"),[r,l]=n.useState("wallet"),[x,m]=n.useState(""),s=a.hotAmount*a.bonusMultiplier,u=async()=>{t("processing");let o=null;try{switch(r){case"wallet":o=await c.buyPresaleTokens(s,a.currency);break;case"solana_pay":return;case"card":o=await c.buyWithCard(s);break;default:throw new Error("Invalid payment method")}if(o)t("success");else throw new Error(c.error||"Transaction failed or was rejected.")}catch(g){m(g.message),t("error")}},h=()=>{t("success")},b=()=>{switch(i){case"select_method":return e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"You are purchasing"}),e.jsxs("p",{className:"text-2xl font-bold my-2 text-brand-accent",children:[a.hotAmount.toLocaleString()," HOT"]}),e.jsxs("p",{className:"text-lg font-bold",children:["Total to Receive: ",s.toLocaleString()," HOT"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"For a total of"}),e.jsxs("p",{className:"font-bold text-lg flex items-center justify-center gap-2 mt-2",children:[e.jsx(N,{asset:a.currency})," ",a.payAmount.toFixed(6)]}),e.jsxs("div",{className:"my-6",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 text-left mb-2",children:"Select Payment Method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>l("wallet"),className:`w-full text-left p-3 rounded-lg border-2 transition-colors ${r==="wallet"?"border-brand-accent bg-brand-accent/10":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-brand-dark"}`,children:[e.jsx("i",{className:"fa-solid fa-wallet mr-3 w-5 text-center"}),"Connected Wallet"]}),e.jsxs("button",{onClick:()=>l("solana_pay"),className:`w-full text-left p-3 rounded-lg border-2 transition-colors ${r==="solana_pay"?"border-brand-accent bg-brand-accent/10":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-brand-dark"}`,children:[e.jsx("i",{className:"fa-solid fa-qrcode mr-3 w-5 text-center"}),"Solana Pay"]}),e.jsxs("button",{onClick:()=>l("card"),className:`w-full text-left p-3 rounded-lg border-2 transition-colors ${r==="card"?"border-brand-accent bg-brand-accent/10":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-brand-dark"}`,children:[e.jsx("i",{className:"fa-solid fa-credit-card mr-3 w-5 text-center"}),"Pay with Card"]})]})]}),r!=="solana_pay"?e.jsx(d,{onClick:u,className:"w-full bg-brand-accent text-brand-dark",children:"Confirm Purchase"}):e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"text-center p-4",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-2xl"})}),children:e.jsx(k,{amount:a.payAmount,currency:a.currency,hotAmount:s,onSuccess:h})})]});case"processing":return e.jsxs("div",{className:"text-center p-8",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-brand-accent"}),e.jsx("p",{className:"mt-4",children:"Processing Transaction..."})]});case"success":return e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-500/10 flex items-center justify-center text-green-500 text-4xl",children:e.jsx("i",{className:"fa-solid fa-check"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Success!"}),e.jsxs("p",{className:"text-gray-500 mt-2",children:["Your purchase of ",s.toLocaleString()," HOT is complete."]}),e.jsx(d,{onClick:a.onClose,className:"w-full mt-6 bg-brand-accent text-brand-dark",children:"Done"})]});case"error":return e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/10 flex items-center justify-center text-red-500 text-4xl",children:e.jsx("i",{className:"fa-solid fa-times"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Transaction Failed"}),e.jsx("p",{className:"text-gray-500 mt-2 bg-gray-100 dark:bg-brand-dark-lighter p-2 rounded-lg text-xs",children:x}),e.jsx(d,{onClick:()=>t("select_method"),className:"w-full mt-6 bg-brand-accent text-brand-dark",children:"Try Again"})]})}};return e.jsx(j,{isOpen:a.isOpen,onClose:a.onClose,title:"Confirm Purchase",children:e.jsx("div",{className:"text-center",children:b()})})};export{S as default};
